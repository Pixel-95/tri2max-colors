<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>tri2max Design</title>
  <link rel="icon" type="image/png" href="./assets/tri2max_logo_darkMode.png" />
  <link rel="stylesheet" href="./tokens.css?v=20260220-7" />
</head>

<body>
  <main>
    <header>
      <img src="./assets/tri2max_logo_lightMode.png" alt="Tri2Max logo" />
      <span>TRI2MAX</span>
    </header>

    <h1 id="main-heading" class="heading-1">Main Heading</h1>
    <p class="text">This is a normal text. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
    <h2 class="heading-2">Control Panel</h2>
    <p class="text">You can open a modal here:
      <button id="learn-more-button" class="button button-inline text-button" type="button">Learn more</button>,
      but be careful.
    </p>

    <div style="display: grid; gap: 0.75rem;">
      <button id="theme-toggle" class="button button-primary text-button" type="button" aria-label="Toggle theme">Go to light mode</button>
      <button id="primary-toggle" class="button button-secondary text-button" type="button" aria-pressed="false">Change Primary Color</button>
    </div>

    <section class="card" aria-label="Output card">
      <button id="restore-values" class="button button-primary button-primary-small text-button" type="button">Restore</button>
      <div>
        <span class="heading-3">Heart rate</span>
        <output><strong id="output-heart-rate">156&hairsp;bpm</strong></output>
      </div>
      <div>
        <span class="heading-3">Power</span>
        <output><strong id="output-power">351&hairsp;W</strong></output>
      </div>
      <div>
        <span class="heading-3">Pace</span>
        <output><strong id="output-pace">4:05/km</strong></output>
      </div>
      <div>
        <label class="heading-3" for="field-text">Heading</label>
        <input id="field-text" class="input" type="text" value="Main Heading" />
      </div>
      <button id="card-button" class="button button-secondary text-button" type="button">Randomize Values</button>
    </section>

    <form aria-label="Form elements">
      <div>
        <span class="heading-3">Use Gradient</span>
        <label class="switch" for="field-switch">
          <input id="field-switch" type="checkbox" checked />
          <span aria-hidden="true"></span>
        </label>
      </div>

      <div>
        <label class="heading-3" for="field-slider">Pace</label>
        <input id="field-slider" class="input input-range" type="range" min="0" max="100" value="23" />
      </div>

      <div>
        <label class="heading-3" for="field-select">Unit System</label>
        <select id="field-select" class="input">
          <option value="metric">Metric</option>
          <option value="imperial">Imperial</option>
        </select>
      </div>

      <div>
        <span class="heading-3">Notification</span>
        <fieldset>
          <label class="text">
            <input type="radio" name="field-radio" value="success" checked />
            Success
          </label>
          <label class="text">
            <input type="radio" name="field-radio" value="warning" />
            Warning
          </label>
          <label class="text">
            <input type="radio" name="field-radio" value="destructive" />
            Destructive
          </label>
        </fieldset>
      </div>

      <div>
        <label class="heading-3" for="field-progress">Scroll State</label>
        <div id="field-progress" class="progressbar" role="progressbar" aria-label="Progress" aria-valuemin="0" aria-valuemax="100" aria-valuenow="72">
          <div class="progressbar-track">
            <div class="progressbar-fill" aria-hidden="true"></div>
          </div>
        </div>
      </div>

      <div>
        <span class="heading-3">Danger Zone</span>
        <label class="text" for="field-checkbox">
          <input id="field-checkbox" type="checkbox" />
          Show
        </label>
      </div>
    </form>

    <section id="danger-zone-area" style="display: grid; gap: 0.75rem;">
      <div class="separator" aria-hidden="true"></div>
      <h2 class="heading-2">Danger Zone</h2>
      <button id="delete-universe" class="button button-destructive text-button" type="button">Reset Values</button>
      <button class="button button-secondary text-button" type="button" disabled>Deactivated</button>
      <div class="separator" aria-hidden="true"></div>
      <section aria-label="Notifications">
        <p id="notification-success" class="notification text" data-tone="success">Success: Changes were saved successfully.</p>
        <p id="notification-warning" class="notification text" data-tone="warning">Warning: Your session will expire in 2 minutes.</p>
        <p id="notification-destructive" class="notification text" data-tone="destructive">Destructive: This action cannot be undone.</p>
      </section>
    </section>

    <footer>
      <p class="text-small">Â© TRI2MAX. All rights reserved.</p>
    </footer>
    <div aria-hidden="true" style="height: 20vh;"></div>
  </main>

  <div id="learn-more-modal" class="modal-overlay" hidden>
    <section class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-copy">
      <button id="modal-close-icon" class="modal-close" type="button" aria-label="Close popup">
        <span aria-hidden="true"></span>
      </button>
      <h2 id="modal-title" class="heading-2">Learn More</h2>
      <p id="modal-copy" class="text">This panel is an interactive design playground. Use the controls to preview themes, typography, and component behavior in real time.</p>
      <button id="modal-close-button" class="button button-primary text-button" type="button">Close Popup</button>
    </section>
  </div>

  <script>
    (function () {
      const root = document.documentElement;
      const learnMoreButton = document.getElementById("learn-more-button");
      const learnMoreModal = document.getElementById("learn-more-modal");
      const modalCloseIcon = document.getElementById("modal-close-icon");
      const modalCloseButton = document.getElementById("modal-close-button");
      const toggleButton = document.getElementById("theme-toggle");
      const primaryToggleButton = document.getElementById("primary-toggle");
      const dangerZoneToggle = document.getElementById("field-checkbox");
      const dangerZoneArea = document.getElementById("danger-zone-area");
      const mainHeading = document.getElementById("main-heading");
      const headingInput = document.getElementById("field-text");
      const heartRateOutput = document.getElementById("output-heart-rate");
      const powerOutput = document.getElementById("output-power");
      const paceOutput = document.getElementById("output-pace");
      const progressBar = document.getElementById("field-progress");
      const restoreValuesButton = document.getElementById("restore-values");
      const cardButton = document.getElementById("card-button");
      const paceSlider = document.getElementById("field-slider");
      const unitSelect = document.getElementById("field-select");
      const notificationRadios = document.querySelectorAll('input[name="field-radio"]');
      const notifications = document.querySelectorAll(".notification[data-tone]");
      const deleteUniverseButton = document.getElementById("delete-universe");
      const gradientSwitch = document.getElementById("field-switch");
      const STORAGE_KEY = "mockup-theme";
      const PRIMARY_STORAGE_KEY = "mockup-primary-color";
      const DANGER_ZONE_STORAGE_KEY = "mockup-danger-zone-visibility";
      const GRADIENT_STORAGE_KEY = "mockup-gradient-enabled";
      const DEFAULT_HEADING = "Main Heading";
      const DEFAULT_HEART_RATE = 156;
      const DEFAULT_POWER = 351;
      const DEFAULT_SLIDER = 23;
      const DEFAULT_UNIT = "metric";
      const DEFAULT_NOTIFICATION_TONE = "success";
      const DEFAULT_DANGER_ZONE_VISIBLE = false;
      const HAIR_SPACE = "\u200A";

      const setTheme = (theme) => {
        if (theme === "light") {
          root.setAttribute("data-theme", "light");
        } else {
          root.removeAttribute("data-theme");
        }

        toggleButton.textContent = theme === "light" ? "Go to dark mode" : "Go to light mode";
      };

      const savedTheme = localStorage.getItem(STORAGE_KEY);
      setTheme(savedTheme === "light" ? "light" : "dark");

      const openLearnMoreModal = () => {
        if (!learnMoreModal) {
          return;
        }

        learnMoreModal.hidden = false;
        document.body.classList.add("modal-open");
      };

      const closeLearnMoreModal = () => {
        if (!learnMoreModal) {
          return;
        }

        learnMoreModal.hidden = true;
        document.body.classList.remove("modal-open");
      };

      learnMoreButton?.addEventListener("click", () => {
        openLearnMoreModal();
      });

      modalCloseIcon?.addEventListener("click", () => {
        closeLearnMoreModal();
      });

      modalCloseButton?.addEventListener("click", () => {
        closeLearnMoreModal();
      });

      learnMoreModal?.addEventListener("click", (event) => {
        if (event.target === learnMoreModal) {
          closeLearnMoreModal();
        }
      });

      document.addEventListener("keydown", (event) => {
        if (event.key === "Escape" && learnMoreModal && !learnMoreModal.hidden) {
          closeLearnMoreModal();
        }
      });

      toggleButton.addEventListener("click", () => {
        const isLightMode = root.getAttribute("data-theme") === "light";
        const nextTheme = isLightMode ? "dark" : "light";
        localStorage.setItem(STORAGE_KEY, nextTheme);
        setTheme(nextTheme);
      });

      const setPrimaryColor = (color) => {
        if (color === "primary2") {
          root.setAttribute("data-primary", "primary2");
        } else {
          root.removeAttribute("data-primary");
        }

        if (!primaryToggleButton) {
          return;
        }

        const isPrimary2 = color === "primary2";
        primaryToggleButton.setAttribute("aria-pressed", isPrimary2 ? "true" : "false");
      };

      const savedPrimaryColor = localStorage.getItem(PRIMARY_STORAGE_KEY);
      setPrimaryColor(savedPrimaryColor === "primary2" ? "primary2" : "primary");

      primaryToggleButton?.addEventListener("click", () => {
        const isPrimary2 = root.getAttribute("data-primary") === "primary2";
        const nextPrimaryColor = isPrimary2 ? "primary" : "primary2";
        setPrimaryColor(nextPrimaryColor);

        if (nextPrimaryColor === "primary2") {
          localStorage.setItem(PRIMARY_STORAGE_KEY, "primary2");
        } else {
          localStorage.removeItem(PRIMARY_STORAGE_KEY);
        }
      });

      const setGradientMode = (isEnabled) => {
        if (isEnabled) {
          root.setAttribute("data-gradient", "enabled");
        } else {
          root.removeAttribute("data-gradient");
        }

        if (gradientSwitch) {
          gradientSwitch.checked = isEnabled;
        }
      };

      const savedGradientMode = localStorage.getItem(GRADIENT_STORAGE_KEY);
      const initialGradientMode = savedGradientMode === null
        ? gradientSwitch?.checked ?? false
        : savedGradientMode === "enabled";
      setGradientMode(initialGradientMode);

      gradientSwitch?.addEventListener("change", (event) => {
        const isEnabled = event.target.checked;
        setGradientMode(isEnabled);
        localStorage.setItem(GRADIENT_STORAGE_KEY, isEnabled ? "enabled" : "disabled");
      });

      const setDangerZoneVisibility = (isVisible) => {
        dangerZoneArea.style.display = isVisible ? "grid" : "none";
        dangerZoneToggle.checked = isVisible;
      };

      const savedDangerZoneVisibility = localStorage.getItem(DANGER_ZONE_STORAGE_KEY);
      const initialDangerZoneVisible = savedDangerZoneVisibility === null
        ? dangerZoneToggle?.checked ?? false
        : savedDangerZoneVisibility === "visible";
      setDangerZoneVisibility(initialDangerZoneVisible);

      dangerZoneToggle?.addEventListener("change", (event) => {
        const isVisible = event.target.checked;
        setDangerZoneVisibility(isVisible);
        localStorage.setItem(DANGER_ZONE_STORAGE_KEY, isVisible ? "visible" : "hidden");
      });

      const setHeartRate = (value) => {
        heartRateOutput.textContent = `${value}${HAIR_SPACE}bpm`;
      };

      const setPower = (value) => {
        powerOutput.textContent = `${value}${HAIR_SPACE}W`;
      };

      const setRangePercent = (rangeInput) => {
        const min = Number(rangeInput.min || 0);
        const max = Number(rangeInput.max || 100);
        const value = Number(rangeInput.value || min);
        const span = max - min;
        const percent = span === 0 ? 0 : ((value - min) / span) * 100;
        rangeInput.style.setProperty("--range-percent", `${percent}%`);
      };

      const randomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

      const paceFromSliderValue = (value) => {
        const minSeconds = 3 * 60 + 30;
        const maxSeconds = 6 * 60;
        return Math.round(minSeconds + ((maxSeconds - minSeconds) * value) / 100);
      };

      const formatPace = (totalSeconds, unit) => {
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = String(totalSeconds % 60).padStart(2, "0");
        const suffix = unit === "imperial" ? "/mile" : "/km";
        return `${minutes}:${seconds}${suffix}`;
      };

      const setPace = () => {
        const sliderValue = Number(paceSlider.value || DEFAULT_SLIDER);
        const paceSeconds = paceFromSliderValue(sliderValue);
        paceOutput.textContent = formatPace(paceSeconds, unitSelect.value);
      };

      const setNotificationTone = (tone) => {
        notifications.forEach((notification) => {
          notification.hidden = notification.dataset.tone !== tone;
        });

        notificationRadios.forEach((radio) => {
          radio.checked = radio.value === tone;
        });
      };

      const setProgressFromScroll = () => {
        if (!progressBar) {
          return;
        }

        const scrollElement = document.documentElement;
        const maxScroll = scrollElement.scrollHeight - scrollElement.clientHeight;
        const currentScroll = window.scrollY || scrollElement.scrollTop || 0;
        const progressPercent = maxScroll <= 0 ? 0 : Math.min(100, Math.max(0, (currentScroll / maxScroll) * 100));

        progressBar.style.setProperty("--progress-value", `${progressPercent}%`);
        progressBar.setAttribute("aria-valuenow", String(Math.round(progressPercent)));
      };

      const restorePerformanceValues = () => {
        setHeartRate(DEFAULT_HEART_RATE);
        setPower(DEFAULT_POWER);
        paceSlider.value = String(DEFAULT_SLIDER);
        unitSelect.value = DEFAULT_UNIT;
        setRangePercent(paceSlider);
        setPace();
      };

      const resetUniverse = () => {
        localStorage.removeItem(STORAGE_KEY);
        localStorage.removeItem(PRIMARY_STORAGE_KEY);
        localStorage.removeItem(GRADIENT_STORAGE_KEY);
        localStorage.removeItem(DANGER_ZONE_STORAGE_KEY);

        setTheme("dark");
        setPrimaryColor("primary");
        setGradientMode(true);

        headingInput.value = DEFAULT_HEADING;
        mainHeading.textContent = DEFAULT_HEADING;

        restorePerformanceValues();

        setNotificationTone(DEFAULT_NOTIFICATION_TONE);
        setDangerZoneVisibility(DEFAULT_DANGER_ZONE_VISIBLE);
      };

      headingInput.addEventListener("input", () => {
        const nextHeading = headingInput.value.trim();
        mainHeading.textContent = nextHeading || DEFAULT_HEADING;
      });

      cardButton.addEventListener("click", () => {
        setHeartRate(randomInt(100, 180));
        setPower(randomInt(150, 400));
      });

      restoreValuesButton.addEventListener("click", () => {
        restorePerformanceValues();
      });

      paceSlider.addEventListener("input", () => {
        setRangePercent(paceSlider);
        setPace();
      });

      unitSelect.addEventListener("change", () => {
        setPace();
      });

      notificationRadios.forEach((radio) => {
        radio.addEventListener("change", () => {
          if (radio.checked) {
            setNotificationTone(radio.value);
          }
        });
      });

      deleteUniverseButton.addEventListener("click", () => {
        resetUniverse();
      });

      window.addEventListener("scroll", setProgressFromScroll, { passive: true });
      window.addEventListener("resize", setProgressFromScroll);

      mainHeading.textContent = headingInput.value.trim() || DEFAULT_HEADING;
      restorePerformanceValues();
      setNotificationTone(DEFAULT_NOTIFICATION_TONE);
      setProgressFromScroll();
    })();
  </script>
</body>

</html>
